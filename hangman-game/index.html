<html lang="en">
<head>
    <meta charset="utf-8">

    <!--meta tag to make content responsive to different devices screen sizes?-->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <meta name="description" content="">
    <meta name="author" content="">

    <link rel="icon" href="assets/noose.ico">

    <title>CAPITAL PUNISHMENT</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <!--Google fonts-->
    <link href="https://fonts.googleapis.com/css?family=Mina:400,700" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="assets/game-style.css" rel="stylesheet">

</head>

<body>
<!--JavaScript for the game itself -->
<script src="game.js"></script>

<!--JQuery, 'Popper', and Bootstrap JS files-->
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

<main role="main">

    <!--<div class="jumbotron text-center">-->
    <!--<div class="container">-->
    <!--<h1 class="display-4" id="title-text">CAPITAL PUNISHMENT</h1>-->
    <!--<p class="lead">A 'hangman' style word guess game themed on the death penalty.</p>-->
    <!--</div>-->
    <!--</div>-->

    <div class="container-fluid">
        <div class="header text-center px-3 py-3 pt-md-5 pb-md-4 mx-auto">
            <h1 class="display-4">Capital Punishment</h1>
            <p class="lead">A 'hangman' style word guess game themed on the death penalty.</p>
        </div>
    </div>

    <div class="container">

        <div class="row">

            <div class="col-md-4">

                <div class="container">
                    <img src="assets/prison.png" class="img-fluid" id="game-image">
                </div>

            </div>

            <div class="col-md-8">

                <!--<hr class="my-4">-->
                <div class="text-fluid">
                    <p>Here's some random text that will be relevant to the game. This 'hangman' style game is themed on the death penalty. I'm not a supporter of capital punishment. This isn't a disclaimer, its a statement of individual opinion and belief. </p>

                    <div class="card align-items-center text-center">
                        <h2 class="card-header text-center">



                            <div class="container text-center align-items-center">
                                <div class="row">
                                    <div class="col-fluid">
                                        <div class="fluid card align-items-center">
                                            <!--<div class="card">-->
                                            <h5 class="card-header text-center">Chances Remaining: <span class="badge badge-secondary" id="chance-int">6</span></h5>
                                        </div>
                                    </div>
                                    <div class="col-fluid">
                                        <div class="fluid card align-items-center">
                                            <h5 class="card-header text-center">Letters Needed to Solve: <span class="badge badge-secondary" id="solve-int">10</span></h5>
                                        </div>
                                    </div>
                                </div>

                                <div class="container text-center align-items-center">
                                    <div class="row align-items-center align-items-center">
                                        <div class="col-fluid">
                                            <div class="fluid card align-items-center">
                                                <!--<div class="card">-->
                                                <h5 class="card-header text-center">Player Wins: <span class="badge badge-secondary" id="won-int">0</span></h5>
                                            </div>
                                        </div>
                                        <div class="col-fluid">
                                            <div class="fluid card align-items-center">
                                                <h5 class="card-header text-center">Players Losses: <span class="badge badge-secondary" id="lost-int">0</span></h5>
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <div class="card-body">
                                    <div class="row card">
                                        <h5 class="card-header">Incorrect Guesses</h5>
                                        <div class="card-body">
                                            <!--<h3 class="card-title" id="chances-remaining">3 Chances Remaining</h3>-->
                                            <h2 class="card-text invisible" id="wrong-letters-text">ABCDEFGHIJKLMNOPQRSTUVWXYZ</h2>

                                        </div>
                                    </div>


                                </div>

                            </div> <!--end of game stats header (with chances/guesses remaining)-->


                        </h2>
                    </div>
                </div>

                <div class="row">

                    <div class="col-md-12 text-center">
                        <hr class=""my-12">
                        <div class="container" id="letters">
                            <!--letters will go here-->
                        </div>


                    </div>

                </div>

            </div>

</main>

<script type="text/javascript">
// jQuery Selectors??


var letterBox = $("#letters");
var wrongLetters = $("#wrong-letters-text");
var solveText = $("#solve-int");
var chanceText = $("#chance-int");
var wonText = $("#won-int");
var lostText = $("#lost-int");


    //creates an <h2> element with class "card-body" for whatever text is passed to it
    var letterText = function (whatText) {
        var letterH2 = $("<h2>");
        letterH2.addClass("card-body");
        letterH2.text(whatText);
        return letterH2;

    };

    //creates a bootstrap 'card' component with an id of "letter-" and the index
var letterDiv = function (whatLetter, index) {
    var newDiv = $("<div>");
    newDiv.addClass("card d-inline-flex");
    newDiv.attr("id", "letter-" + index);
    theTextFor = letterText(whatLetter);
    newDiv.append(theTextFor);
    return newDiv;
    };

    //function to display blank letters for game's current word
var startRound = function() {
    letterBox.text("");
    for (var i = 0; i < game.currentWord.length; i++) {
        var newText = letterDiv("_", i);
        letterBox.append(newText);
    }
    solveText.text(game.remainingLetters);
    chanceText.text(game.remainingChances);
    wrongLetters.text("");
};


    $(document).ready( function() {


        game.newRound();
        startRound();


        //wrong letter text contains entire alphabet before game starts
        // ================ set size of wrong-letters-text & remove this
        wrongLetters.toggleClass("invisible");

        $(document).keypress(function (event) {

            // use uppercase charcodes for upper and lower case letters
            var uCaseCode = String.fromCharCode(event.which).toUpperCase().charCodeAt(0);
            var whatKey = String.fromCharCode(uCaseCode);
            var keyObj = game.keyStatus[whatKey]; //object contains information related to guess
            var keyPos = game.currentWord.indexOf(whatKey); //index position of the letter guessed in word
            var alphaNumber = uCaseCode - 65; // turns CharCodes back to 0-indexed alphabet

            // if the key is a letter of the alphabet
            if ( (alphaNumber >= 0) && (alphaNumber <= 25) ) {



                // if the key has not been guessed...mark that it has
                if (keyObj.guessed === false) {
                    keyObj.guessed = true;

                    //if the guess is correct
            if (keyObj.occurs > 0) {

                // var keyInt = game.currentWord.indexOf(whatKey);
                var placeholder = $("#letter-" + keyPos);

                // if the correct guess occurs more than once in the word
                if (keyObj.occurs > 1) {
                    for (i = 0; i < keyObj.occurs; i++) {
                        var newInt = game.currentWord.indexOf(whatKey, keyPos);
                        placeholder = $("#letter-" + newInt);
                        placeholder.html(letterText(whatKey));
                        keyPos = newInt + 1;// if 1 isn't added, the same letter is found forever
                    }
                }
                else {
                    // set text value for **single** occurrence of letter
                    placeholder.html(letterText(whatKey));
                };

                game.remainingLetters -= keyObj.occurs;
                solveText.text(game.remainingLetters);

                //if this guess won the gane
                if (game.remainingLetters == 0) {
                    game.wins++;
                    wonText.text(game.wins);
                    if (game.wordsUnused.length == 0) {
                        wrongLetters.text("You've attempted to guess all the words! Refresh the page to play again.");
                        return;
                    }
                    game.newRound();
                    startRound();
                    return;
                };
            }
            // if the guess is wrong
                    else {
                // if this guess lost the round

                if (game.remainingChances == 0) {

                    //if all the words have been played, notify the player & return
                    if (game.wordsUnused.length == 0) {
                        wrongLetters.text("You've attempted to guess all the words! Refresh the page to play again.");
                        return;
                    }
                    // otherwise, return the word to the array and count the loss, start a new round
                    game.wordsUnused.push(game.currentWord);
                    game.losses++;
                    lostText.text(game.losses);
                    game.newRound();
                    startRound();
                    return;
                }
                else {
                    game.remainingChances--;
                    chanceText.text(game.remainingChances);
                    wrongLetters.append(whatKey);
                };
                    };

                }
                else {

                    // if this letter has already been guessed, do nothing.

                }; // end of conditional statements related to guesses


            }; // end of checking if keypress is a letter
        }); // end of $(document).keypress()
        // end of $(document).ready()
    });


</script>


</body>
</html>